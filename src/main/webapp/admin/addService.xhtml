<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
    <title>Add New Service - Admin Panel</title>

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>

    <!-- Prime Icons -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/primeicons@5.0.0/primeicons.css"/>

    <style>
        body {
            background: #f2f4f7;
        }

        .center-wrapper {
            display: flex;
            justify-content: center;
            padding: 40px 15px;
            margin-left: 260px;
        }

        .service-card {
            width: 100%;
            max-width: 480px;
            padding: 25px 22px;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.10);
        }

        h2 {
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            color: #343a40;
        }

        @media (max-width: 768px) {
            .center-wrapper {
                margin-left: 0 !important;
            }
        }

        .input-group-text {
            background: #f1f1f1;
            border-right: none;
        }

        .form-control, .form-select {
            background: #f1f1f1;
            border-left: none;
        }

        .form-control:focus, .form-select:focus {
            background: #ffffff;
            border-color: #0d6efd;
            box-shadow: 0 0 4px rgba(13, 110, 253, 0.4);
        }

        .alert {
            border-radius: 8px;
        }
    </style>
</h:head>

<h:body>

    <!-- Theme + sidebar -->
    <ui:include src="/admin/includes/adminTheme.xhtml"/>
    <ui:include src="/admin/includes/adminSidebar.xhtml"/>

    <div class="center-wrapper">

        <div class="service-card">

            <h2>Add New Service</h2>

            <!-- ERROR MESSAGE -->
            <h:panelGroup rendered="#{not empty adminServiceBean.errorMessage}">
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <h:outputText value="#{adminServiceBean.errorMessage}"/>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            </h:panelGroup>

            <!-- FORM -->
            <h:form>

                <!-- Service Name -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="pi pi-file"></i></span>
                    <h:inputText value="#{adminServiceBean.name}"
                                 required="true"
                                 styleClass="form-control"
                                 p:placeholder="Service Name"/>
                </div>

                <!-- Description -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="pi pi-align-left"></i></span>
                    <h:inputTextarea value="#{adminServiceBean.description}"
                                     required="true"
                                     rows="3"
                                     styleClass="form-control"
                                     p:placeholder="Description"/>
                </div>

                <!-- Charges -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="pi pi-money-bill"></i></span>
                    <h:inputText value="#{adminServiceBean.charge}"
                                 required="true"
                                 styleClass="form-control"
                                 p:type="number"
                                 p:step="0.01"
                                 p:placeholder="Charges (KES)"/>
                </div>

                <!-- Duration Value -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="pi pi-clock"></i></span>
                    <h:inputText value="#{adminServiceBean.durationValue}"
                                 required="true"
                                 styleClass="form-control"
                                 p:type="number"
                                 p:placeholder="Duration Value"/>
                </div>

                <!-- Duration Unit -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="pi pi-calendar"></i></span>
                    <h:selectOneMenu value="#{adminServiceBean.durationUnit}"
                                     required="true"
                                     styleClass="form-select form-control">
                        <f:selectItem itemLabel="-- Select Duration Unit --" itemValue=""/>
                        <f:selectItem itemLabel="Hours" itemValue="HOUR"/>
                        <f:selectItem itemLabel="Days" itemValue="DAY"/>
                        <f:selectItem itemLabel="Weeks" itemValue="WEEK"/>
                        <f:selectItem itemLabel="Months" itemValue="MONTH"/>
                        <f:selectItem itemLabel="Years" itemValue="YEAR"/>
                    </h:selectOneMenu>
                </div>

                <!-- Buttons -->
                <div class="d-grid gap-2 mt-3">
                    <h:commandButton value="Add Service"
                                     action="#{adminServiceBean.addService}"
                                     styleClass="btn btn-primary"/>
                    <a href="services.xhtml" class="btn btn-secondary">Cancel</a>
                </div>

            </h:form>

        </div>
    </div>

</h:body>
</html>
